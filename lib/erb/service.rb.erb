require_relative 'service'

module <%= @object.full_const.split(/::/).first %>
  module Services

    class <%= "#{@object.const} < Service" %>

      def initialize(<%= @object.params.map(&:name).join(':, ')%>:)
<% for @para in @object.params -%>
<% decor = @decorator.new(@para.type) -%>
<% guard = "Guard#{decor.const}" -%>
        @<%= @para.name %> = <%= guard %>.(<%= @para.name %>)
<% end -%>
      end

      def call
        # check contracts
<% for @para in @object.results -%>
<% decor = @decorator.new(@para.type) -%>
<% guard = "Guard#{decor.const}" -%>
        # <%= guard %>.(<%= @para.name %> = ...)
<% end -%>
      end
    end

  end
end
